webpackJsonp([9],{I8Xn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("TKJA"),r={name:"PhotoCommentIndex",components:{CommentList:o.b},beforeRouteEnter:function(t,e,n){n(function(n){"photo.comment.childcomment.index"!==e.name&&setTimeout(function(){document.querySelector(t.hash).scrollIntoView(),"create"===n.$route.query.comment&&document.commentForm.content.focus()},200)})}},m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"page"},[n("comment-list"),t._v(" "),n("p",{attrs:{id:"bottom"}})],1)},c=[],u={render:m,staticRenderFns:c},s=u,i=n("VU/8"),a=i(r,s,!1,null,null,null);e.default=a.exports},TKJA:function(t,e,n){"use strict";var o,r=n("M5l+"),m=n("HV/Z"),c=n("3rNL"),u=n("FxhO"),s=n("IcnI"),i=n("woOf"),a=n.n(i),C={comments:[],completed:!1,cursor:{current:"",prev:"",next:"",limit:3,count:3,direction:""},getCommentsStatus:null},d={childComments:[],childCompleted:!1,childCursor:{current:"",prev:"",next:"",limit:3,count:3,direction:""},getChildCommentsStatus:null},l={submitCommentStatus:null},E={updateCommentStatus:null,commentTobeUpdated:null},T={deleteCommentStatus:null,commentTobeDeleted:null},S={childCommentStatus:null,commentTobeReplied:null},h=a()(C,d,l,E,T,S),_=function(t){return t.comments},f=function(t){return t.childComments},M=function(t){return t.completed},p=function(t){return t.childCompleted},g=function(t){return t.cursor.direction},v=function(t){return t.childCursor.direction},U=function(t){return t.cursor.count},O=function(t){return t.childCursor.count},I=function(t){return t.getCommentsStatus},N=function(t){return t.getChildCommentsStatus},D=function(t){return t.submitCommentStatus},R=function(t){return t.updateCommentStatus},L=function(t){return t.deleteCommentStatus},b=function(t){return t.commentTobeUpdated},A=function(t){return t.commentTobeDeleted},B=function(t){return t.commentTobeReplied},y={comments:_,childComments:f,completed:M,childCompleted:p,getCommentsStatus:I,getChildCommentsStatus:N,submitCommentStatus:D,updateCommentStatus:R,deleteCommentStatus:L,commentTobeUpdated:b,commentTobeDeleted:A,cursorDirection:g,childCursorDirection:v,commentsCount:U,childCommentsCount:O,commentTobeReplied:B},F=n("bOdI"),H=n.n(F),x=(o={},H()(o,"GET_COMMENTS_REQUEST",function(t){t.getCommentsStatus=null}),H()(o,"GET_COMMENTS_SUCCESS",function(t,e){t.getCommentsStatus="Successfully get  all comments!";var n=e.data;if(!t.completed){if(!n.comments)return t.getCommentsStatus=n.message.content,t.completed=!0,void(n.meta&&(t.cursor=a()(t.cursor,{direction:n.meta.direction})));t.comments=t.comments.concat(n.comments),t.cursor=a()(t.cursor,{current:n.meta.cursor.current,next:n.meta.cursor.next,prev:n.meta.cursor.prev,count:n.meta.cursor.count}),t.cursor.count<t.cursor.limit&&(t.completed=!0)}}),H()(o,"GET_COMMENTS_FAILURE",function(t,e){var n="Something error. Try again or contact admin!";console.log(e);var o=e.response.data;o.error&&(n=o.error.message),t.getCommentsStatus=n}),H()(o,"RESET_COMMENTS",function(t){t.comments=[],t.completed=!1,t.cursor=a()(t.cursor,{current:"",prev:"",next:"",limit:3}),t.getCommentsStatus=null}),H()(o,"GET_CHILD_COMMENTS_REQUEST",function(t){t.getChildCommentsStatus=null}),H()(o,"GET_CHILD_COMMENTS_SUCCESS",function(t,e){t.getChildCommentsStatus="Successfully get all comments!";var n=e.data;if(!t.childCompleted){if(!n.comments)return t.getChildCommentsStatus=n.message.content,t.childCompleted=!0,void(n.meta&&(t.childCursor=a()(t.childCursor,{direction:n.meta.direction})));t.childComments=t.childComments.concat(n.comments),t.childCursor=a()(t.childCursor,{current:n.meta.cursor.current,next:n.meta.cursor.next,prev:n.meta.cursor.prev,count:n.meta.cursor.count}),t.childCursor.count<t.childCursor.limit&&(t.childCompleted=!0)}}),H()(o,"GET_CHILD_COMMENTS_FAILURE",function(t,e){var n="Something error. Try again or contact admin!",o=e.response.data;o.error&&(n=o.error.message),t.getChildCommentsStatus=n}),H()(o,"RESET_CHILD_COMMENTS",function(t){t.childComments=[],t.childCompleted=!1,t.childCursor=a()(t.cursor,{current:"",prev:"",next:"",limit:3}),t.getChildCommentsStatus=null}),H()(o,"SUBMIT_COMMENT_REQUEST",function(t){t.submitCommentStatus=null}),H()(o,"SUBMIT_COMMENT_SUCCESS",function(t,e){t.submitCommentStatus=e.data.message.content}),H()(o,"SUBMIT_COMMENT_FAILURE",function(t,e){var n="Something error. Try again or contact admin!",o=e.response.data;o.error?n=o.error.message:"VALIDATION_FAILED"===o.meta.message&&(n=o.errors),t.submitCommentStatus=n}),H()(o,"SUBMIT_CHILD_COMMENT_REQUEST",function(t){t.submitCommentStatus=null}),H()(o,"SUBMIT_CHILD_COMMENT_SUCCESS",function(t,e){t.submitCommentStatus=e.data.message.content}),H()(o,"SUBMIT_CHILD_COMMENT_FAILURE",function(t,e){var n="Something error. Try again or contact admin!",o=e.response.data;o.error?n=o.error.message:"VALIDATION_FAILED"===o.meta.message&&(n=o.errors),t.submitCommentStatus=n}),H()(o,"UPDATE_COMMENT_REQUEST",function(t){t.updateCommentStatus=null}),H()(o,"UPDATE_COMMENT_SUCCESS",function(t,e){t.updateCommentStatus=e.data.message.content}),H()(o,"UPDATE_COMMENT_FAILURE",function(t,e){var n="Something error. Try again or contact admin!";console.log(e);var o=e.response.data;o.error?n=o.error.message:"VALIDATION_FAILED"===o.meta.message&&(n=o.errors),t.updateCommentStatus=n}),H()(o,"SET_COMMENT_TOBE_UPDATED",function(t,e){t.commentTobeUpdated=e}),H()(o,"DELETE_COMMENT_REQUEST",function(t){t.deleteCommentStatus=null}),H()(o,"DELETE_COMMENT_SUCCESS",function(t,e){t.deleteCommentStatus=e.data.message.content}),H()(o,"DELETE_COMMENT_FAILURE",function(t,e){var n="Something error. Try again or contact admin!",o=e.response.data;o.error&&(n=o.error.message),t.deleteCommentStatus=n}),H()(o,"SET_COMMENT_TOBE_DELETED",function(t,e){t.commentTobeDeleted=e}),H()(o,"SET_COMMENT_TOBE_REPLIED",function(t,e){t.commentTobeReplied=e}),o),$=n("nXnE"),P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return $.a.get("photos/"+t+"/comments?cursor="+e+"&direction="+n,o).then(function(t){return t}).catch(function(t){throw t})},G=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return $.a.get("photos/"+t+"/comments/"+e+"/child-comments?cursor="+n+"&direction="+o,r).then(function(t){return t}).catch(function(t){throw t})},Q=function(t,e,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};$.a.post("photos/"+t+"/comments/",e,r).then(function(t){n(t)}).catch(function(t){o(t)})},k=function(t,e,n,o,r){var m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};$.a.post("photos/"+t+"/comments/"+e+"/comments/",n,m).then(function(t){o(t)}).catch(function(t){r(t)})},w=function(t,e,n,o,r){var m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};$.a.post("photos/"+t+"/comments/"+e.id,n,m).then(function(t){o(t)}).catch(function(t){r(t)})},z=function(t,e,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};$.a.delete("photos/"+t+"/comments/"+e.id,r).then(function(t){n(t)}).catch(function(t){o(t)})},V={getComments:P,getChildComments:G,submitPhotoComment:Q,submitChildComment:k,updateComment:w,deleteComment:z},J=n("YaEn"),q={getComments:function(t){var e=t.commit,n=t.state,o=t.rootState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",m={Authorization:"Bearer "+o.authToken};e("GET_COMMENTS_REQUEST");var c="";c="newer"===r?n.cursor.prev:n.cursor.next,V.getComments(J.a.currentRoute.params.id,c,r,{headers:m}).then(function(t){e("GET_COMMENTS_SUCCESS",t)}).catch(function(t){e("GET_COMMENTS_FAILURE",t)})},getChildComments:function(t){var e=t.commit,n=t.state,o=t.rootState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",m={Authorization:"Bearer "+o.authToken};e("GET_CHILD_COMMENTS_REQUEST");var c="";c="newer"===r?n.childCursor.prev:n.childCursor.next,V.getChildComments(J.a.currentRoute.params.pid,J.a.currentRoute.params.cid,c,r,{headers:m}).then(function(t){e("GET_CHILD_COMMENTS_SUCCESS",t)}).catch(function(t){e("GET_CHILD_COMMENTS_FAILURE",t)})},submitPhotoComment:function(t,e){var n=this,o=(t.state,t.commit),r=t.dispatch,m=t.rootState,c={Authorization:"Bearer "+m.authToken};o("SUBMIT_COMMENT_REQUEST"),V.submitPhotoComment(m.$_photo.photoTobeCommented.id,e,function(t){o("SUBMIT_COMMENT_SUCCESS",t),n._vm.$snotify.success(t.data.message.content),o("RESET_COMMENTS"),r("getComments")},function(t){o("SUBMIT_COMMENT_FAILURE",t),n._vm.$snotify.error(t.response.data.error.message)},{headers:c})},submitChildComment:function(t,e){var n=this,o=t.state,r=t.commit,m=t.dispatch,c=t.rootState,u={Authorization:"Bearer "+c.authToken};r("SUBMIT_CHILD_COMMENT_REQUEST"),V.submitChildComment(c.$_photo.photoTobeCommented.id,o.commentTobeReplied.id,e,function(t){r("SUBMIT_CHILD_COMMENT_SUCCESS",t),n._vm.$snotify.success(t.data.message.content),r("RESET_CHILD_COMMENTS"),m("getChildComments")},function(t){r("SUBMIT_CHILD_COMMENT_FAILURE",t),n._vm.$snotify.error(t.response.data.error.message)},{headers:u})},updateComment:function(t,e){var n=this,o=t.commit,r=t.dispatch,m=t.rootState,c=e.commentTobeUpdated,u=e.updateCommentData,s={Authorization:"Bearer "+m.authToken};o("UPDATE_COMMENT_REQUEST"),V.updateComment(m.$_photo.photoTobeCommented.id,c,u,function(t){o("UPDATE_COMMENT_SUCCESS",t),n._vm.$snotify.success(t.data.message.content),"photo.comment.index"===J.a.currentRoute.name?(o("RESET_COMMENTS"),r("getComments")):(o("RESET_CHILD_COMMENTS"),r("getChildComments"))},function(t){o("UPDATE_COMMENT_FAILURE",t),n._vm.$snotify.error(t.response.data.error.message)},{headers:s})},deleteComment:function(t,e){var n=this,o=t.commit,r=t.dispatch,m=t.rootState,c={Authorization:"Bearer "+m.authToken};o("DELETE_COMMENT_REQUEST"),V.deleteComment(m.$_photo.photoTobeCommented.id,e,function(t){o("DELETE_COMMENT_SUCCESS",t),n._vm.$snotify.success(t.data.message.content),"photo.comment.index"===J.a.currentRoute.name?(o("RESET_COMMENTS"),r("getComments")):(o("RESET_CHILD_COMMENTS"),r("getChildComments"))},function(t){o("DELETE_COMMENT_FAILURE",t),n._vm.$snotify.error(t.response.data.error.message)},{headers:c})}},K={namespaced:!0,state:h,getters:y,mutations:x,actions:q};n.d(e,"b",function(){return r.default}),n.d(e,!1,function(){return m.default}),n.d(e,"a",function(){return c.default}),n.d(e,!1,function(){return u.default}),s.a.$_comment||s.a.registerModule("$_comment",K)}});
//# sourceMappingURL=9.21d33756bb687a96e39d.js.map