webpackJsonp([3,7],{"7hxv":function(t,n,i){"use strict";function o(t){i("zCjC")}Object.defineProperty(n,"__esModule",{value:!0});var a=i("Dd8w"),e=i.n(a),r=i("NYxO"),s=i("BCIj"),c=i.n(s),u=i("GtZi"),l=i("92is"),d={name:"NotificationList",components:{VueDataLoading:c.a,NotificationListItem:u.default,LoadingSpinner:l.default},computed:e()({},Object(r.c)({notifications:"$_notification/notifications",completed:"$_notification/completed",initialLoading:"initialLoading",loading:"loading"})),methods:e()({},Object(r.b)({getNotifications:"$_notification/getNotifications",getNotificationsRefresh:"$_notification/getNotificationsRefresh"})),created:function(){this.notifications.length||this.getNotifications()}},f=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("loading-spinner",{attrs:{displayed:t.initialLoading&&t.loading}}),t._v(" "),i("vue-data-loading",{attrs:{loading:t.loading,completed:t.completed,listens:["pull-down","infinite-scroll"]},on:{"infinite-scroll":t.getNotifications,"pull-down":t.getNotificationsRefresh}},[i("div",{attrs:{slot:"pull-down-before"},slot:"pull-down-before"},[t._v("Pull down to refresh the data")]),t._v(" "),i("div",{attrs:{slot:"pull-down-ready"},slot:"pull-down-ready"},[t._v("Ready to refresh")]),t._v(" "),i("div",{attrs:{slot:"pull-down-loading"},slot:"pull-down-loading"},[i("loading-spinner",{attrs:{displayed:t.loading}}),t._v("\n      Refreshing ...\n    ")],1),t._v(" "),t.notifications.length?i("div",t._l(t.notifications,function(t){return i("notification-list-item",{key:t.id,attrs:{notification:t}})})):t._e(),t._v(" "),i("div",{attrs:{slot:"pull-up-before"},slot:"pull-up-before"},[t._v("Pull up to load the data")]),t._v(" "),i("div",{attrs:{slot:"pull-up-ready"},slot:"pull-up-ready"},[t._v("Ready to load")]),t._v(" "),i("div",{attrs:{slot:"pull-up-loading"},slot:"pull-up-loading"},[i("loading-spinner",{attrs:{displayed:t.loading}}),t._v("\n      Loading...\n    ")],1),t._v(" "),i("div",{attrs:{slot:"infinite-scroll-loading"},slot:"infinite-scroll-loading"},[i("loading-spinner",{attrs:{displayed:t.loading}}),t._v("\n      Loading...\n    ")],1),t._v(" "),i("div",{attrs:{slot:"completed"},slot:"completed"},[t._v("Completed loading data")])])],1)},_=[],A={render:f,staticRenderFns:_},N=A,S=i("VU/8"),T=o,m=S(d,N,!1,T,null,null);n.default=m.exports},qmEg:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a=i("7hxv"),e=(i("GtZi"),i("ZzkK"),i("HavO"),i("AEQC"),i("IcnI")),r=i("woOf"),s=i.n(r),c={notifications:[],completed:!1,cursor:{current:"",prev:"",next:"",limit:7,count:7,direction:""},getNotificationsStatus:null},u={markNotificationAsReadStatus:null},l={markNotificationAsUnreadStatus:null},d=s()(c,u,l),f=function(t){return t.notifications},_=function(t){return t.completed},A=function(t){return t.cursor.direction},N=function(t){return t.getNotificationsStatus},S=function(t){return t.markNotificationAsReadStatus},T=function(t){return t.markNotificationAsUnreadStatus},m={notifications:f,completed:_,cursorDirection:A,getNotificationsStatus:N,markNotificationAsReadStatus:S,markNotificationAsUnreadStatus:T},I=i("bOdI"),g=i.n(I),R=i("Z1ve"),E=(o={},g()(o,R.GET_NOTIFICATIONS_REQUEST,function(t){t.getNotificationsStatus=null}),g()(o,R.GET_NOTIFICATIONS_SUCCESS,function(t,n){t.getNotificationsStatus="Successfully get  all notifications!";var i=n.data;if(!t.completed){if(!i.notifications)return t.getNotificationsStatus=i.message.content,t.completed=!0,void(i.meta&&(t.cursor=s()(t.cursor,{direction:i.meta.direction})));t.notifications=t.notifications.concat(i.notifications),t.cursor=s()(t.cursor,{current:i.meta.cursor.current,next:i.meta.cursor.next,prev:i.meta.cursor.prev,count:i.meta.cursor.count}),t.cursor.count<t.cursor.limit&&(t.completed=!0)}}),g()(o,R.GET_NOTIFICATIONS_FAILURE,function(t,n){var i="Something error. Try again or contact admin!",o=n.response.data;o.error&&(i=o.error.message),t.getNotificationsStatus=i}),g()(o,R.GET_NOTIFICATIONS_REFRESH_REQUEST,function(t){t.completed=!1,t.getNotificationsStatus=null,t.notifications=[]}),g()(o,R.MARK_NOTIFICATION_AS_READ_REQUEST,function(t){t.markNotificationAsReadStatus=null}),g()(o,R.MARK_NOTIFICATION_AS_READ_SUCCESS,function(t,n){t.markNotificationAsReadStatus=n.data.message.content}),g()(o,R.MARK_NOTIFICATION_AS_READ_FAILURE,function(t,n){var i="Something error. Try again or contact admin!",o=n.response.data;o.error&&(i=o.error.message),t.markNotificationAsReadStatus=i}),g()(o,R.MARK_NOTIFICATION_AS_UNREAD_REQUEST,function(t){t.markNotificationAsUnreadStatus=null}),g()(o,R.MARK_NOTIFICATION_AS_UNREAD_SUCCESS,function(t,n){t.markNotificationAsUnreadStatus=n.data.message.content}),g()(o,R.MARK_NOTIFICATION_AS_UNREAD_FAILURE,function(t,n){var i="Something error. Try again or contact admin!",o=n.response.data;o.error&&(i=o.error.message),t.markNotificationAsUnreadStatus=i}),o),p=i("nXnE"),v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return p.a.get("notifications?cursor="+t+"&direction="+n+"&limit="+i,o).then(function(t){return t}).catch(function(t){throw t})},O=function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p.a.post("notifications/"+t+"/mark-as-read",[],o).then(function(t){n(t)}).catch(function(t){i(t)})},h=function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p.a.delete("notifications/"+t+"/mark-as-unread",o).then(function(t){n(t)}).catch(function(t){i(t)})},C={getNotifications:v,markNotificationAsRead:O,markNotificationAsUnread:h},U={getNotifications:function(t){var n=t.commit,i=t.state,o=t.rootState,a={Authorization:"Bearer "+o.authToken};n(R.GET_NOTIFICATIONS_REQUEST),setTimeout(function(){C.getNotifications(i.cursor.next,"",i.cursor.limit,{headers:a}).then(function(t){n(R.GET_NOTIFICATIONS_SUCCESS,t)}).catch(function(t){n(R.GET_NOTIFICATIONS_FAILURE,t)})},300)},getNotificationsRefresh:function(t){var n=t.commit,i=t.state,o=t.rootState,a={Authorization:"Bearer "+o.authToken};n(R.GET_NOTIFICATIONS_REFRESH_REQUEST),n(R.GET_NOTIFICATIONS_REQUEST),setTimeout(function(){C.getNotifications("","",i.cursor.limit,{headers:a}).then(function(t){n(R.GET_NOTIFICATIONS_SUCCESS,t)}).catch(function(t){n(R.GET_NOTIFICATIONS_FAILURE,t)})},300)},markNotificationAsRead:function(t,n){var i=t.state,o=t.commit,a=t.rootState,e={Authorization:"Bearer "+a.authToken};o(R.MARK_NOTIFICATION_AS_READ_REQUEST),C.markNotificationAsRead(n,function(t){o(R.MARK_NOTIFICATION_AS_READ_SUCCESS,t),i.notifications&&o("UPDATE_STATE_OBJECT_IN_ARRAY",{module:"$_notification",stateObjectArrayKey:"notifications",updatedObject:t.data.notification},{root:!0})},function(t){o("ERROR_CAUGHT",null,{root:!0}),o(R.MARK_NOTIFICATION_AS_READ_FAILURE,t)},{headers:e})},markNotificationAsUnread:function(t,n){var i=t.state,o=t.commit,a=t.rootState,e={Authorization:"Bearer "+a.authToken};o(R.MARK_NOTIFICATION_AS_UNREAD_REQUEST),C.markNotificationAsUnread(n,function(t){o(R.MARK_NOTIFICATION_AS_UNREAD_SUCCESS,t),i.notifications&&o("UPDATE_STATE_OBJECT_IN_ARRAY",{module:"$_notification",stateObjectArrayKey:"notifications",updatedObject:t.data.notification},{root:!0})},function(t){o("ERROR_CAUGHT",null,{root:!0}),o(R.MARK_NOTIFICATION_AS_UNREAD_FAILURE,t)},{headers:e})}},F={namespaced:!0,state:d,getters:m,mutations:E,actions:U};e.a.$_notification||e.a.registerModule("$_notification",F);var k={name:"Notification",components:{NotificationList:a.default}},y=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("section",{staticClass:"page"},[i("notification-list")],1)},L=[],D={render:y,staticRenderFns:L},b=D,G=i("VU/8"),K=G(k,b,!1,null,null,null);n.default=K.exports},u9Vd:function(t,n,i){n=t.exports=i("FZ+f")(!0),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"NotificationList.vue",sourceRoot:""}])},zCjC:function(t,n,i){var o=i("u9Vd");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("89869836",o,!0,{})}});
//# sourceMappingURL=3.2fa0a38e66185655add2.js.map